---
import { getCollection } from 'astro:content';

const singleData = {
  tip: "心路历程",
  title: "为何而建站",
  lishi: "『ZSXの小站』历史进程",
  content: "『ZSXの小站』是我的个人博客，在这里分享我的生活日常、学习心得和技术分享。"
};

// 获取about集合中的所有内容
let aboutContent;
try {
  const aboutCollection = await getCollection('about');
  if (aboutCollection && aboutCollection.length > 0) {
    aboutContent = aboutCollection[0];
  }
} catch (e) {
  console.error('Failed to load about collection:', e);
}
---

<div class="create-site-post author-content-item single">
  <div class="author-content-item-tips">
    {singleData.tip}
  </div>
  <div class="author-content-item-title">
    {singleData.title}
  </div>
  <p class="author-content-item-content">
    {singleData.content}
  </p>
  <div class="lishi">
    {singleData.lishi}
  </div>
  <div class="singlePost">
    {aboutContent?.rendered ? (
      <article class="article" set:html={aboutContent.rendered.html} />
    ) : (
      <p class="text-center">
        可于 about.mdx 配置补充说明。
      </p>
    )}
  </div>
</div>

<style scoped>
.single {
  width: 100%;
  border-radius: 12px;
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  padding: 1rem 2rem;
}

.author-content-item-tips {
  opacity: 0.8;
  font-size: 12px;
  margin-bottom: 0.5rem;
}

.author-content-item-title {
  font-size: 1.875rem;
  line-height: 2.25rem;
  font-weight: 700;
}

.lishi {
  font-size: 1.875rem;
  line-height: 2.25rem;
  font-weight: 700;
  margin: 1rem 0;
}

.author-content-item-content {
  margin-bottom: 1rem;
  margin-top: 0.5rem;
  vertical-align: middle;
  font-size: 1rem;
  line-height: 1.5;
}

.singlePost {
  margin-top: 1.5rem;
  padding-top: 1.5rem;
  border-top: 1px solid var(--border-color);
}

.article {
  font-size: 1rem;
  line-height: 1.6;
}

.article h1,
.article h2,
.article h3,
.article h4,
.article h5,
.article h6 {
  margin: 1.5rem 0 1rem 0;
  font-weight: 700;
  line-height: 1.2;
}

.article p {
  margin-bottom: 1rem;
}

.article a {
  color: var(--primary-color);
  text-decoration: underline;
  transition: color 0.2s;
}

.article a:hover {
  color: var(--primary-hover);
}
</style>